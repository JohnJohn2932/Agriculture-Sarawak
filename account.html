<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Account - GreenGrow Sarawak</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="accountregister.css">
    <script src="script.js" defer></script>
</head>
<body>
    <header>
        <div class="logo">
            <a href="index.html"><img src="assets/logo.png" alt="Logo"></a>
        </div>
        <nav class="nav-container">
            <ul class="nav-links">
                <li><a href="index.html" data-i18n="nav_home">Home</a></li>
                <li><a href="weather.html" data-i18n="nav_weather">Weather</a></li>
                <li><a href="plant.html" data-i18n="nav_plant">Plant</a></li>
                <!-- <li><a href="contact.html" data-i18n="nav_contact">Contact</a></li> -->
            </ul>
        </nav>
        <div class="header-auth">
            <a href="accountregister.html" data-i18n="header_register">Register</a>
            <span class="divider">|</span>
            <a href="accountlogin.html" data-i18n="header_login">Login</a>
            <!-- The profile dropdown is added dynamically by script.js -->
        </div>
    </header>
    <main>
        <section class="account-section" style="padding: 4rem 0; background: var(--light-gray); min-height: 80vh;">
            <div class="section-header">
                <h2 data-i18n="account.title">My Account</h2>
                <p data-i18n="account.description">Edit your profile, change your password, or delete your account.</p>
            </div>
            <div class="account-container" style="max-width: 600px; margin: 0 auto;">
                <div class="account-profile-box">
                    <div class="profile-avatar-container">
                        <img src="assets/default-avatar.png" alt="Profile Picture" class="profile-avatar" id="profileAvatar">
                        <label for="avatarUpload" class="avatar-upload-label">
                            <span class="plus-icon">+</span>
                            <input type="file" id="avatarUpload" accept="image/*" style="display:none;">
                        </label>
                    </div>
                    <div class="profile-info-fields">
                        <div class="profile-info-row">
                            <span class="profile-label" data-i18n="account.username">Username:</span>
                            <span class="profile-value" id="profileUsername">User Name</span>
                            <button type="button" class="profile-change-btn" data-field="username">Change</button>
                        </div>
                        <div class="profile-info-row">
                            <span class="profile-label" data-i18n="account.email">Email:</span>
                            <span class="profile-value" id="profileEmail">user@email.com</span>
                            <button type="button" class="profile-change-btn" data-field="email">Change</button>
                        </div>
                        <div class="profile-info-row">
                            <span class="profile-label" data-i18n="account.phone">Phone:</span>
                            <span class="profile-value" id="profilePhone">0123456789</span>
                            <button type="button" class="profile-change-btn" data-field="phone">Change</button>
                        </div>
                        <div class="profile-info-row">
                            <span class="profile-label" data-i18n="account.address">Address:</span>
                            <span class="profile-value" id="profileAddress">User Address</span>
                            <button type="button" class="profile-change-btn" data-field="address">Change</button>
                        </div>
                        <div class="profile-info-row">
                            <span class="profile-label" data-i18n="account.password">Password:</span>
                            <span class="profile-value" id="profilePassword">********</span>
                            <button type="button" class="profile-change-btn" data-field="password">Change</button>
                        </div>
                        <div class="profile-info-row">
                            <span class="profile-label" data-i18n="account.city">City:</span>
                            <span class="profile-value" id="profileCity">User City</span>
                            <button type="button" class="profile-change-btn" data-field="city">Change</button>
                        </div>
                        <div class="profile-info-row">
                            <span class="profile-label" data-i18n="account.state">State:</span>
                            <span class="profile-value" id="profileState">User State</span>
                            <button type="button" class="profile-change-btn" data-field="state">Change</button>
                        </div>
                        <div class="profile-info-row">
                            <span class="profile-label" data-i18n="account.postcode">Postcode:</span>
                            <span class="profile-value" id="profilePostcode">User Postcode</span>
                            <button type="button" class="profile-change-btn" data-field="postcode">Change</button>
                        </div>
                    </div>
                </div>
                <button id="saveProfileBtn" class="profile-save-btn" style="margin-top:1.5rem; width:100%;" data-i18n="profile_save_changes">Save Changes</button>
                <button id="logoutBtn" class="profile-logout-btn" style="margin-top:1rem; width:100%; background-color: #dc3545; color: white; border: none; padding: 0.8rem; border-radius: 25px; cursor: pointer;" data-i18n="profile_logout">Log Out</button>
                <hr style="margin: 2em 0;">
                <!-- Removed change password form and delete account button as per user request -->
            </div>
        </section>
    </main>
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3 data-i18n="site_title">GreenGrow Sarawak</h3>
                <p data-i18n="footer_description">Empowering farmers with technology and sustainable solutions.</p>
            </div>
            <div class="footer-section">
                <h3 data-i18n="footer_quick_links_header">Quick Links</h3>
                <ul>
                    <li><a href="index.html" data-i18n="nav_home">Home</a></li>
                    <li><a href="weather.html" data-i18n="nav_weather">Weather</a></li>
                    <li><a href="plant.html" data-i18n="nav_plant">Plant</a></li>
                    <!-- <li><a href="contact.html" data-i18n="nav_contact">Contact</a></li> -->
                </ul>
            </div>
            <div class="footer-section">
                <h3 data-i18n="footer_contact_header">Contact Us</h3>
                <p data-i18n="footer_contact_address"><i class="fas fa-map-marker-alt"></i> Kuching, Sarawak</p>
                <p data-i18n="footer_contact_phone"><i class="fas fa-phone"></i> +60 12-345 6789</p>
                <p data-i18n="footer_contact_email"><i class="fas fa-envelope"></i> info@greengrow.com</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p data-i18n="footer_copyright">&copy; 2025 GreenGrow Sarawak. All rights reserved.</p>
        </div>
    </footer>
    <script>
        // TODO: Add JS to load user info, handle form submissions, and delete account
        
        // Logout functionality
        document.getElementById('logoutBtn').addEventListener('click', async function() {
            const user = JSON.parse(localStorage.getItem('user'));
            if (user && user.email) {
                try {
                    await fetch('/delete-account', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email: user.email })
                    });
                } catch (e) { /* ignore errors for now */ }
            }
            localStorage.removeItem('user');
            sessionStorage.removeItem('user');
            window.location.href = 'index.html';
        });
    </script>
</body>
</html> 